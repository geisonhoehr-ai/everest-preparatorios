export const ranks = [
  // 🪄 Liga 1 – Aprendizes (Níveis 1–5)
  { 
    name: "Novato da Guilda", 
    minScore: 0,
    league: "Aprendizes",
    level: 1,
    insignia: "🧿 Pedra da Iniciação",
    blessing: "Todo herói começou do zero. Você já começou."
  },
  { 
    name: "Estudante Arcano", 
    minScore: 100,
    league: "Aprendizes",
    level: 2,
    insignia: "📜 Pergaminho Antigo",
    blessing: "Conhecimento é o primeiro feitiço."
  },
  { 
    name: "Explorador das Ruínas", 
    minScore: 300,
    league: "Aprendizes",
    level: 3,
    insignia: "🧭 Bússola da Curiosidade",
    blessing: "Os mapas se revelam para quem ousa explorar."
  },
  { 
    name: "Portador da Chama", 
    minScore: 600,
    league: "Aprendizes",
    level: 4,
    insignia: "🔥 Chama do Despertar",
    blessing: "Uma pequena chama pode incendiar o mundo."
  },
  { 
    name: "Aprendiz de Batalha", 
    minScore: 1000,
    league: "Aprendizes",
    level: 5,
    insignia: "🛡️ Escudo Rachado",
    blessing: "Cada erro te fortalece para a próxima luta."
  },

  // 🗡️ Liga 2 – Aventureiros (Níveis 6–10)
  { 
    name: "Guerreiro Errante", 
    minScore: 1500,
    league: "Aventureiros",
    level: 6,
    insignia: "⚔️ Espada de Treinamento",
    blessing: "A estrada é longa, mas você já empunha sua arma."
  },
  { 
    name: "Mago Iniciado", 
    minScore: 2500,
    league: "Aventureiros",
    level: 7,
    insignia: "🔮 Orbe Brilhante",
    blessing: "O poder está na mente disciplinada."
  },
  { 
    name: "Ranger da Fronteira", 
    minScore: 4000,
    league: "Aventureiros",
    level: 8,
    insignia: "🦅 Pena do Vento",
    blessing: "Você enxerga longe, e sabe onde quer chegar."
  },
  { 
    name: "Alquimista do Saber", 
    minScore: 6000,
    league: "Aventureiros",
    level: 9,
    insignia: "🧪 Frasco Violeta",
    blessing: "Misturar ideias também é uma forma de magia."
  },
  { 
    name: "Guardião do Portão", 
    minScore: 8500,
    league: "Aventureiros",
    level: 10,
    insignia: "🏰 Chave Rúnica",
    blessing: "Agora você guarda conhecimento valioso."
  },

  // 🛡️ Liga 3 – Heróis (Níveis 11–15)
  { 
    name: "Paladino da Lógica", 
    minScore: 11500,
    league: "Heróis",
    level: 11,
    insignia: "⚖️ Escudo Luminoso",
    blessing: "Você defende ideias com verdade e sabedoria."
  },
  { 
    name: "Feiticeiro Elemental", 
    minScore: 15000,
    league: "Heróis",
    level: 12,
    insignia: "🌩️ Cristal do Trovão",
    blessing: "Você manipula o saber como forças da natureza."
  },
  { 
    name: "Assassino de Dúvidas", 
    minScore: 20000,
    league: "Heróis",
    level: 13,
    insignia: "🗡️ Adaga Mental",
    blessing: "Nenhuma dúvida resiste à sua disciplina."
  },
  { 
    name: "Bardo dos Códigos", 
    minScore: 26000,
    league: "Heróis",
    level: 14,
    insignia: "🎻 Lira Dourada",
    blessing: "Seu conhecimento já inspira outros heróis."
  },
  { 
    name: "Domador de Pergaminhos", 
    minScore: 33000,
    league: "Heróis",
    level: 15,
    insignia: "📚 Cinto de Manuscritos",
    blessing: "Os livros já te obedecem como aliados."
  },

  // 🔥 Liga 4 – Mestres (Níveis 16–20)
  { 
    name: "Arcanista Supremo", 
    minScore: 41000,
    league: "Mestres",
    level: 16,
    insignia: "💠 Tatuagem Astral",
    blessing: "Você toca as estrelas com o que sabe."
  },
  { 
    name: "General da Mente", 
    minScore: 50000,
    league: "Mestres",
    level: 17,
    insignia: "🎖️ Medalha Psíquica",
    blessing: "Você lidera batalhas com estratégia e clareza."
  },
  { 
    name: "Mestre Ilusionista", 
    minScore: 60000,
    league: "Mestres",
    level: 18,
    insignia: "🪞 Máscara do Véu",
    blessing: "Você transforma o complexo em algo simples."
  },
  { 
    name: "Xamã do Conhecimento Ancestral", 
    minScore: 72000,
    league: "Mestres",
    level: 19,
    insignia: "🐺 Totem da Memória",
    blessing: "Você carrega a sabedoria de eras."
  },
  { 
    name: "Arquimago do Saber", 
    minScore: 85000,
    league: "Mestres",
    level: 20,
    insignia: "🧙‍♂️ Cajado Estelar",
    blessing: "Você não apenas aprende: você revela mistérios."
  },

  // 🌌 Liga 5 – Lendas (Níveis 21–25)
  { 
    name: "Lâmina do Infinito", 
    minScore: 100000,
    league: "Lendas",
    level: 21,
    insignia: "🗡️ Lâmina Eterna",
    blessing: "Seu esforço cortou os limites da dúvida."
  },
  { 
    name: "Profeta das Runas", 
    minScore: 120000,
    league: "Lendas",
    level: 22,
    insignia: "🔤 Livro Vivo",
    blessing: "Você lê além das palavras. Você compreende."
  },
  { 
    name: "Guardião do Portal do Tempo", 
    minScore: 145000,
    league: "Lendas",
    level: 23,
    insignia: "⏳ Ampulheta Divina",
    blessing: "Você respeita o tempo, e o tempo te honra."
  },
  { 
    name: "Avatar do Conhecimento", 
    minScore: 175000,
    league: "Lendas",
    level: 24,
    insignia: "🌠 Aura de Sabedoria",
    blessing: "Você é a encarnação do que estudou."
  },
  { 
    name: "Lenda da Torre Eterna", 
    minScore: 210000,
    league: "Lendas",
    level: 25,
    insignia: "🏯 Marca dos Imortais",
    blessing: "Seu nome está cravado no topo. Muitos o seguirão."
  }
];

export function getRank(score: number) {
  for (let i = ranks.length - 1; i >= 0; i--) {
    if (score >= ranks[i].minScore) {
      return ranks[i];
    }
  }
  return ranks[0]; // Novato da Guilda como default
}

export function getNextRankInfo(score: number) {
  for (let i = 0; i < ranks.length; i++) {
    if (score < ranks[i].minScore) {
      return {
        rank: ranks[i],
        scoreNeeded: ranks[i].minScore - score,
      };
    }
  }
  return null; // Já está no rank máximo
}

export function getLeagueInfo(leagueName: string) {
  const leagueRanks = ranks.filter(rank => rank.league === leagueName);
  return {
    name: leagueName,
    ranks: leagueRanks,
    totalRanks: leagueRanks.length,
    minScore: leagueRanks[0]?.minScore || 0,
    maxScore: leagueRanks[leagueRanks.length - 1]?.minScore || 0
  };
}

export function getAllLeagues() {
  const leagues = [...new Set(ranks.map(rank => rank.league))];
  return leagues.map(leagueName => getLeagueInfo(leagueName));
}

export function getRankProgress(score: number) {
  const currentRank = getRank(score);
  const nextRank = getNextRankInfo(score);
  
  if (!nextRank) {
    return {
      currentRank,
      nextRank: null,
      progress: 100,
      scoreNeeded: 0,
      isMaxRank: true
    };
  }

  const currentRankScore = currentRank.minScore;
  const nextRankScore = nextRank.rank.minScore;
  const progress = ((score - currentRankScore) / (nextRankScore - currentRankScore)) * 100;

  return {
    currentRank,
    nextRank: nextRank.rank,
    progress: Math.min(100, Math.max(0, progress)),
    scoreNeeded: nextRank.scoreNeeded,
    isMaxRank: false
  };
}
